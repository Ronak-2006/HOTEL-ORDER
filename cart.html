<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Cart</title>
    <style>
        * { box-sizing: border-box; }
        html, body { height: 100%; margin: 0; font-family: Arial, Helvetica, sans-serif; background: #f6f7fb; }
        .header { background: #6a6ff0; color: #fff; padding: 16px 24px; display: flex; align-items: center; justify-content: space-between; }
        .header a { color: #fff; text-decoration: none; }
        .container { max-width: 900px; margin: 24px auto; background: #fff; border-radius: 12px; box-shadow: 0 8px 24px rgba(0,0,0,0.08); padding: 24px; }
        h1 { margin: 0 0 16px; font-size: 22px; }
        .cart-item { display: grid; grid-template-columns: 1fr auto auto auto; gap: 12px; align-items: center; padding: 12px 0; border-bottom: 1px solid #eee; }
        .cart-item:last-child { border-bottom: none; }
        .name { font-weight: bold; }
        .price { color: #6a6ff0; font-weight: bold; }
        .qty-controls { display: flex; align-items: center; gap: 8px; }
        .btn { border: 1px solid #ddd; background: #fff; padding: 6px 10px; border-radius: 6px; cursor: pointer; }
        .danger { border-color: #f44336; color: #f44336; }
        .footer { display: flex; justify-content: space-between; align-items: center; margin-top: 16px; }
        .checkout { background: #6a6ff0; color: #fff; border: none; padding: 12px 16px; border-radius: 8px; cursor: pointer; }
        .empty { text-align: center; color: #666; padding: 24px 0; }
    </style>
</head>
<body>
    <div class="header">
        <a href="menu.html">← Back to Menu</a>
        <strong>Cart</strong>
        <span></span>
    </div>
    <div class="container">
        <h1>Your Cart</h1>
        <div id="cartItems"></div>
        <div id="empty" class="empty" style="display:none;">Your cart is empty.</div>
        <div class="footer">
            <div id="total">Total: ₹0</div>
            <button class="checkout" onclick="goToCheckout()">Proceed to Checkout</button>
        </div>
    </div>

    <script>
        let cart = [];

        function loadCart() {
            try {
                const saved = localStorage.getItem('cart');
                cart = saved ? JSON.parse(saved) : [];
            } catch (e) {
                cart = [];
            }
            renderCart();
        }

        function saveCart() {
            localStorage.setItem('cart', JSON.stringify(cart));
        }

        function renderCart() {
            const container = document.getElementById('cartItems');
            const empty = document.getElementById('empty');
            container.innerHTML = '';
            if (!cart.length) {
                empty.style.display = 'block';
                document.querySelector('.footer').style.display = 'none';
                return;
            }
            empty.style.display = 'none';
            document.querySelector('.footer').style.display = 'flex';

            cart.forEach((item, index) => {
                const row = document.createElement('div');
                row.className = 'cart-item';
                row.innerHTML = `
                    <div class="name">${item.name}</div>
                    <div class="price">₹${item.price}</div>
                    <div class="qty-controls">
                        <button class="btn" onclick="changeQty(${index}, -1)">-</button>
                        <span>${item.quantity}</span>
                        <button class="btn" onclick="changeQty(${index}, 1)">+</button>
                    </div>
                    <button class="btn danger" onclick="removeItem(${index})">Remove</button>
                `;
                container.appendChild(row);
            });
            updateTotal();
        }

        function changeQty(index, delta) {
            cart[index].quantity = Math.max(1, cart[index].quantity + delta);
            saveCart();
            renderCart();
        }

        function removeItem(index) {
            cart.splice(index, 1);
            saveCart();
            renderCart();
        }

        function updateTotal() {
            const total = cart.reduce((sum, i) => sum + i.price * i.quantity, 0);
            document.getElementById('total').textContent = `Total: ₹${total}`;
        }

        function goToCheckout() {
            if (!cart.length) {
                alert('Your cart is empty!');
                return;
            }
            window.location.href = 'checkout.html';
        }

        loadCart();
    </script>
</body>
</html>
